import{m as oe,e as ne,f as de,l as ce,p as c,q as U,w as pe,n as k,k as L,t as ue}from"./index-Cmf_HX6D.js";import{c as he,a as ye}from"./input-CrBvr0XE.js";import{c as fe}from"./loop-24SuRqx9.js";const S="breakout",l=oe(S),Y=ne(),p=Y.find(t=>t.id===(l==null?void 0:l.themeId))||Y[0];de();if(p){const t=document.documentElement.style;t.setProperty("--color-primary",p.colors.primary),t.setProperty("--color-secondary",p.colors.secondary),t.setProperty("--color-accent",p.colors.accent),t.setProperty("--color-text",p.colors.text),t.setProperty("--color-muted",p.colors.muted),t.setProperty("--color-bg",p.colors.background),document.body.style.background=p.gradient||p.colors.background}const B=document.getElementById("game-root"),x=document.getElementById("game-canvas"),M=document.getElementById("ui"),r=x.getContext("2d"),T=he(),g=document.createElement("div");g.className="overlay";g.style.display="none";M.appendChild(g);const P=document.createElement("div");P.className="toast-layer";B.appendChild(P);const b={left:(l==null?void 0:l.input.keys.left)||"ArrowLeft",right:(l==null?void 0:l.input.keys.right)||"ArrowRight",altLeft:(l==null?void 0:l.input.keys.altLeft)||"KeyQ",altRight:(l==null?void 0:l.input.keys.altRight)||"KeyD",launch:(l==null?void 0:l.input.keys.launch)||"Space"};var _,K;const me=typeof window<"u"&&(((K=(_=window.matchMedia)==null?void 0:_.call(window,"(pointer: coarse)"))==null?void 0:K.matches)||navigator.maxTouchPoints>0),A=me?ye({container:document.body,input:T,mapping:{left:b.left,right:b.right,actionA:b.launch,actionALabel:"Lancer"},autoShow:!1,showPad:!0,gestureEnabled:!1,showOnDesktop:!1}):{show:()=>{},hide:()=>{},dispose:()=>{}},E=(l==null?void 0:l.difficultyParams.rows)??6,C=(l==null?void 0:l.difficultyParams.cols)??10,I=(l==null?void 0:l.difficultyParams.lives)??3,$=(l==null?void 0:l.difficultyParams.ballSpeed)??320,W=(l==null?void 0:l.difficultyParams.pointsPerBrick)??10,v={easy:{label:"Facile",rows:E+1,cols:C+1,lives:Math.max(3,I+1),ballSpeed:Math.round($*.92),pointsPerBrick:Math.max(6,W),brickDensity:.78,powerupChance:.24},medium:{label:"Moyen",rows:E+2,cols:C+2,lives:I,ballSpeed:$,pointsPerBrick:W,brickDensity:.86,powerupChance:.2},hard:{label:"Difficile",rows:E+3,cols:C+3,lives:Math.max(2,I-1),ballSpeed:Math.round($*1.1),pointsPerBrick:W+2,brickDensity:.92,powerupChance:.18},extreme:{label:"Extreme",rows:E+4,cols:C+4,lives:1,ballSpeed:Math.round($*1.2),pointsPerBrick:W+4,brickDensity:.97,powerupChance:.16}};let R="medium";const w=v[R],q=[{type:"extra-ball",label:"Balles supplementaires",symbol:"+1",color:p.colors.primary,kind:"bonus",weight:2},{type:"speed-up",label:"Vitesse acceleree",symbol:"V+",color:"#f97316",kind:"malus",duration:6,speedMultiplier:1.35,weight:3},{type:"invert-controls",label:"Touches inversees",symbol:"INV",color:"#fb7185",kind:"malus",duration:6,weight:3},{type:"screen-shake",label:"Ecran qui tremble",symbol:"SHA",color:"#f43f5e",kind:"malus",duration:1.4,weight:2},{type:"paddle-shrink",label:"Raquette reduite",symbol:"R-",color:"#f472b6",kind:"malus",duration:8,paddleWidthMultiplier:.6,weight:3},{type:"paddle-slow",label:"Raquette lente",symbol:"LNT",color:"#fb923c",kind:"malus",duration:6,paddleSpeedMultiplier:.6,weight:2},{type:"ball-small",label:"Balle minuscule",symbol:"MIN",color:"#38bdf8",kind:"malus",duration:6,ballRadiusMultiplier:.7,weight:2}];var Q;const e={running:!1,width:0,height:0,dpr:devicePixelRatio||1,play:{x:0,y:0,w:0,h:0},paddle:{x:0,y:0,w:120,h:16,speed:640},paddleBaseWidth:120,paddleWidthMultiplier:1,paddleWidthTimer:0,paddleSpeedMultiplier:1,paddleSpeedTimer:0,balls:[],ballRadius:8,ballRadiusMultiplier:1,ballRadiusTimer:0,rows:w.rows,cols:w.cols,brickGap:c((l==null?void 0:l.difficultyParams.brickGap)??8,4,14),brickHeight:22,bricks:[],bricksRemaining:0,totalBricks:0,clearedRows:new Set,score:0,best:((Q=ce().games[S])==null?void 0:Q.bestScore)??0,lives:w.lives,ballSpeed:w.ballSpeed,ballSpeedMultiplier:1,pointsPerBrick:w.pointsPerBrick,brickDensity:w.brickDensity,powerupChance:w.powerupChance,powerupSize:20,powerupFallSpeed:160,powerups:[],invertTimer:0,speedTimer:0,shakeTimer:0,shakeDuration:0,launchHeld:!1,flash:0},J=fe({update:t=>qe(t),render:re,fps:60});function Z(){const t={...e.play};if(e.dpr=devicePixelRatio||1,x.width=window.innerWidth*e.dpr,x.height=window.innerHeight*e.dpr,x.style.width="100%",x.style.height="100%",e.width=x.width/e.dpr,e.height=x.height/e.dpr,ee(),t.w>0&&t.h>0){const s=(e.paddle.x-t.x)/t.w;e.paddle.x=e.play.x+c(s,0,1)*e.play.w,e.balls.forEach(a=>{if(a.stuck)return;const i=(a.x-t.x)/t.w,o=(a.y-t.y)/t.h;a.x=e.play.x+i*e.play.w,a.y=e.play.y+o*e.play.h}),e.powerups.forEach(a=>{const i=(a.x-t.x)/t.w,o=(a.y-t.y)/t.h;a.x=e.play.x+i*e.play.w,a.y=e.play.y+o*e.play.h})}else e.paddle.x=e.play.x+(e.play.w-e.paddle.w)/2;e.balls.some(s=>s.stuck)&&G(),xe()}function ee(){const t=Math.max(16,Math.min(e.width,e.height)*.05),s=Math.min(e.width-t*2,920),a=e.height-t*2;e.play.x=(e.width-s)/2,e.play.y=t,e.play.w=s,e.play.h=a;const i=c((l==null?void 0:l.difficultyParams.paddleWidth)??s*.24,s*.16,s*.34);e.paddleBaseWidth=i,e.paddle.w=c(i*e.paddleWidthMultiplier,s*.12,s*.38),e.paddle.h=c(Math.floor(a*.03),10,18),e.paddle.y=e.play.y+e.play.h-e.paddle.h-Math.max(16,a*.04),e.ballRadius=c(Math.floor(s*.012),6,10),e.brickGap=c((l==null?void 0:l.difficultyParams.brickGap)??6,3,10);const o=Math.max(1,e.rows),n=Math.max(140,a*.55),u=Math.floor((n-e.brickGap*(o-1))/o);e.brickHeight=c(u,10,22),e.powerupSize=c(Math.floor(s*.03),16,26),e.powerupFallSpeed=c(a*.22,120,240),ae(),e.powerups.forEach(h=>{h.size=e.powerupSize,h.vy=e.powerupFallSpeed})}function xe(){if(!e.bricks.length)return;const t=(e.play.w-e.brickGap*(e.cols-1))/e.cols,s=e.play.x,a=e.play.y+Math.max(18,e.play.h*.08);e.bricks.forEach(i=>{i.w=t,i.h=e.brickHeight,i.x=s+i.col*(t+e.brickGap),i.y=a+i.row*(e.brickHeight+e.brickGap)})}function te(){const t=[p.colors.primary,p.colors.secondary,p.colors.accent,"#ffd166","#7ce7ff"],s=(e.play.w-e.brickGap*(e.cols-1))/e.cols,a=e.play.x,i=e.play.y+Math.max(18,e.play.h*.08);e.bricks=[],e.clearedRows=new Set;const o=c(e.brickDensity,.2,1),n=e.rows*e.cols,u=Math.round(n*o),h=Math.max(8,Math.floor(u*.75)),y=[],f=(d,m)=>{e.bricks.push({x:a+m*(s+e.brickGap),y:i+d*(e.brickHeight+e.brickGap),w:s,h:e.brickHeight,row:d,col:m,alive:!0,color:t[d%t.length]})};for(let d=0;d<e.rows;d+=1)for(let m=0;m<e.cols;m+=1)U(o)?f(d,m):y.push({row:d,col:m});if(e.bricks.length<h&&y.length>0){for(let d=y.length-1;d>0;d-=1){const m=Math.floor(k(0,d+1));[y[d],y[m]]=[y[m],y[d]]}for(const d of y){if(e.bricks.length>=h)break;f(d.row,d.col)}}e.bricks.length===0&&f(Math.floor(e.rows/2),Math.floor(e.cols/2)),e.totalBricks=e.bricks.length,e.bricksRemaining=e.totalBricks}function G(){e.balls.forEach(t=>{t.stuck&&(t.x=e.paddle.x+e.paddle.w/2,t.y=e.paddle.y-t.r-4)})}function ve(t){const s=j();return{x:e.paddle.x+e.paddle.w/2,y:e.paddle.y-s-4,vx:0,vy:0,r:s,stuck:t}}function N(){e.balls=[ve(!0)]}function z(){return e.ballSpeed*e.ballSpeedMultiplier}function O(t){const s=c(t,.6,1.6);if(s===e.ballSpeedMultiplier)return;const a=s/e.ballSpeedMultiplier;e.ballSpeedMultiplier=s,e.balls.forEach(i=>{i.stuck||(i.vx*=a,i.vy*=a)})}function j(){return c(e.ballRadius*e.ballRadiusMultiplier,4,12)}function ae(){const t=j();e.balls.forEach(s=>{s.r=t}),e.balls.some(s=>s.stuck)&&G()}function F(t){const s=c(t,.5,1.4);s!==e.ballRadiusMultiplier&&(e.ballRadiusMultiplier=s,ae())}function we(t,s){F(t),e.ballRadiusTimer=s}function V(t){const s=c(t,.45,1.5);if(s===e.paddleWidthMultiplier)return;e.paddleWidthMultiplier=s;const a=e.play.w*.12,i=e.play.w*.38;e.paddle.w=c(e.paddleBaseWidth*e.paddleWidthMultiplier,a,i),e.paddle.x=c(e.paddle.x,e.play.x,e.play.x+e.play.w-e.paddle.w),e.balls.some(o=>o.stuck)&&G()}function be(t,s){V(t),e.paddleWidthTimer=s}function X(t){const s=c(t,.45,1.6);e.paddleSpeedMultiplier=s}function ke(t,s){X(t),e.paddleSpeedTimer=s}function Me(t,s){O(t),e.speedTimer=s}function Se(t){e.shakeTimer=t,e.shakeDuration=t}function ge(){e.shakeTimer=0,e.shakeDuration=0,B.style.transform=""}function Te(){const t=Math.PI/3,s=z();e.balls.forEach(a=>{if(!a.stuck)return;const i=-Math.PI/2+k(-t/2,t/2);a.vx=Math.cos(i)*s,a.vy=Math.sin(i)*s,a.stuck=!1})}function Re(t){const s=j(),a=e.paddle.x+e.paddle.w/2,i=e.paddle.y-s-4,o=Math.PI/2.2,n=z();for(let u=0;u<t;u+=1){const h=-Math.PI/2+k(-o/2,o/2);e.balls.push({x:a+k(-12,12),y:i,vx:Math.cos(h)*n,vy:Math.sin(h)*n,r:s,stuck:!1})}}function Be(t,s){const a=document.createElement("div");a.className=`toast ${s}`,a.textContent=t,P.appendChild(a),requestAnimationFrame(()=>{a.classList.add("show")}),window.setTimeout(()=>{a.classList.remove("show"),window.setTimeout(()=>a.remove(),220)},1400)}function Pe(){const t=q.reduce((a,i)=>a+i.weight,0);let s=k(0,t);for(const a of q)if(s-=a.weight,s<=0)return a;return q[0]}function Ee(t,s){const a=Pe();e.powerups.push({x:t,y:s,vy:e.powerupFallSpeed+k(-20,40),size:e.powerupSize,type:a.type,label:a.label,symbol:a.symbol,color:a.color,kind:a.kind,duration:a.duration,speedMultiplier:a.speedMultiplier,paddleWidthMultiplier:a.paddleWidthMultiplier,paddleSpeedMultiplier:a.paddleSpeedMultiplier,ballRadiusMultiplier:a.ballRadiusMultiplier})}function Ce(t){U(e.powerupChance)&&Ee(t.x+t.w/2,t.y+t.h/2)}function $e(t){const s=t.kind==="bonus"?"Bonus":"Malus";switch(Be(`${s}: ${t.label}`,t.kind),t.type){case"extra-ball":Re(2);break;case"speed-up":Me(t.speedMultiplier??1.3,t.duration??6);break;case"invert-controls":e.invertTimer=t.duration??6;break;case"screen-shake":Se(t.duration??1.2);break;case"paddle-shrink":be(t.paddleWidthMultiplier??.6,t.duration??8);break;case"paddle-slow":ke(t.paddleSpeedMultiplier??.6,t.duration??6);break;case"ball-small":we(t.ballRadiusMultiplier??.7,t.duration??6);break}}function We(t){const s=e.paddle,a=e.play.y+e.play.h;e.powerups=e.powerups.filter(i=>(i.y+=i.vy*t,i.y-i.size>a?!1:i.y+i.size/2>=s.y&&i.y-i.size/2<=s.y+s.h&&i.x>=s.x&&i.x<=s.x+s.w?($e(i),!1):!0))}function se(t){e.rows=t.rows,e.cols=t.cols,e.lives=t.lives,e.ballSpeed=t.ballSpeed,e.pointsPerBrick=t.pointsPerBrick,e.brickDensity=c(t.brickDensity,.2,1),e.powerupChance=c(t.powerupChance,.05,.4)}function ie(){e.invertTimer=0,e.speedTimer=0,e.paddleWidthTimer=0,e.paddleSpeedTimer=0,e.ballRadiusTimer=0,O(1),V(1),X(1),F(1),ge()}function De(){if(!l){H("Config manquante","Ajoute configs/games/breakout.config.json",!1);return}A.show();const t=v[R]||v.medium;se(t),ee(),ie(),P.innerHTML="",e.running=!0,e.score=0,e.flash=0,e.powerups=[],e.paddle.x=e.play.x+(e.play.w-e.paddle.w)/2,N(),te(),g.style.display="none",x.style.pointerEvents="auto",M.style.pointerEvents="none",L({type:"SESSION_START",gameId:S}),J.start()}function le(t){e.running=!1,J.stop(),A.hide(),ie(),e.powerups=[],P.innerHTML="";const s=e.score;L({type:t?"SESSION_WIN":"SESSION_FAIL",gameId:S,payload:{score:s}}),ue(S,(l==null?void 0:l.saveSchemaVersion)??1,o=>{const n=o.bestScore||0;s>n&&(o.bestScore=s);const u=e.totalBricks-e.bricksRemaining,h=o.state.bestBricks||0;u>h&&(o.state.bestBricks=u)}),e.best=Math.max(e.best,s),H(t?"Victoire":"Perdu",(l==null?void 0:l.uiText.help)||"Relance une partie pour battre ton record.",!0,s)}function Le(){e.lives=Math.max(0,e.lives-1),e.flash=1,e.lives<=0?le(!1):N()}function Ge(t){t.alive&&(t.alive=!1,e.bricksRemaining-=1,e.score+=e.pointsPerBrick,L({type:"BRICK_BROKEN",gameId:S,payload:{score:e.score}}),Ce(t),e.clearedRows.has(t.row)||!e.bricks.some(a=>a.alive&&a.row===t.row)&&(e.clearedRows.add(t.row),L({type:"ROW_CLEARED",gameId:S})),e.bricksRemaining<=0&&le(!0))}function He(t){if(e.speedTimer>0&&(e.speedTimer=Math.max(0,e.speedTimer-t),e.speedTimer===0&&O(1)),e.paddleWidthTimer>0&&(e.paddleWidthTimer=Math.max(0,e.paddleWidthTimer-t),e.paddleWidthTimer===0&&V(1)),e.paddleSpeedTimer>0&&(e.paddleSpeedTimer=Math.max(0,e.paddleSpeedTimer-t),e.paddleSpeedTimer===0&&X(1)),e.ballRadiusTimer>0&&(e.ballRadiusTimer=Math.max(0,e.ballRadiusTimer-t),e.ballRadiusTimer===0&&F(1)),e.invertTimer>0&&(e.invertTimer=Math.max(0,e.invertTimer-t)),e.shakeTimer>0&&(e.shakeTimer=Math.max(0,e.shakeTimer-t)),e.shakeTimer>0){const s=e.shakeDuration>0?e.shakeTimer/e.shakeDuration:0,a=Math.max(1,8*s);B.style.transform=`translate(${k(-a,a)}px, ${k(-a,a)}px)`}else B.style.transform&&(B.style.transform="")}function Ie(t){e.balls.some(s=>s.stuck)&&G();for(let s=e.balls.length-1;s>=0;s-=1){const a=e.balls[s];if(a.stuck)continue;a.x+=a.vx*t,a.y+=a.vy*t,Ae(a)&&e.balls.splice(s,1)}e.balls.length===0&&Le()}function qe(t){if(!e.running)return;He(t);const s=T.isDown(b.left)||T.isDown(b.altLeft),i=(T.isDown(b.right)||T.isDown(b.altRight)?1:0)-(s?1:0),o=e.invertTimer>0?-i:i;o!==0&&(e.paddle.x+=o*e.paddle.speed*e.paddleSpeedMultiplier*t),e.paddle.x=c(e.paddle.x,e.play.x,e.play.x+e.play.w-e.paddle.w);const n=T.isDown(b.launch);e.balls.some(u=>u.stuck)&&n&&!e.launchHeld&&Te(),e.launchHeld=n,Ie(t),e.running&&(We(t),e.flash=Math.max(0,e.flash-t*2))}function Ae(t){const s=e.play;if(t.x-t.r<=s.x&&(t.x=s.x+t.r,t.vx=Math.abs(t.vx)),t.x+t.r>=s.x+s.w&&(t.x=s.x+s.w-t.r,t.vx=-Math.abs(t.vx)),t.y-t.r<=s.y&&(t.y=s.y+t.r,t.vy=Math.abs(t.vy)),t.y-t.r>s.y+s.h)return!0;if(t.vy>0&&t.y+t.r>=e.paddle.y&&t.y-t.r<=e.paddle.y+e.paddle.h&&t.x>=e.paddle.x&&t.x<=e.paddle.x+e.paddle.w){const a=(t.x-(e.paddle.x+e.paddle.w/2))/(e.paddle.w/2),o=c(a,-1,1)*(Math.PI/3),n=z();t.vx=Math.sin(o)*n,t.vy=-Math.cos(o)*n,t.y=e.paddle.y-t.r-.5}for(const a of e.bricks){if(!a.alive||t.x+t.r<a.x||t.x-t.r>a.x+a.w||t.y+t.r<a.y||t.y-t.r>a.y+a.h)continue;const i=Math.min(t.x+t.r-a.x,a.x+a.w-(t.x-t.r)),o=Math.min(t.y+t.r-a.y,a.y+a.h-(t.y-t.r));i<o?t.vx*=-1:t.vy*=-1,Ge(a);break}return!1}function D(t,s,a,i,o){const n=Math.min(o,a/2,i/2);r.beginPath(),r.moveTo(t+n,s),r.lineTo(t+a-n,s),r.quadraticCurveTo(t+a,s,t+a,s+n),r.lineTo(t+a,s+i-n),r.quadraticCurveTo(t+a,s+i,t+a-n,s+i),r.lineTo(t+n,s+i),r.quadraticCurveTo(t,s+i,t,s+i-n),r.lineTo(t,s+n),r.quadraticCurveTo(t,s,t+n,s),r.closePath()}function Ne(){e.powerups.length&&(r.save(),r.textAlign="center",r.textBaseline="middle",e.powerups.forEach(t=>{const s=t.size,a=s/2,i=r.createLinearGradient(t.x-a,t.y-a,t.x+a,t.y+a);i.addColorStop(0,t.color),i.addColorStop(1,`${t.color}cc`),r.fillStyle=i,D(t.x-a,t.y-a,s,s,8),r.fill(),r.strokeStyle="rgba(255,255,255,0.28)",r.lineWidth=1,r.stroke(),r.fillStyle="#0b1020",r.font=`700 ${Math.max(10,s*.45)}px "Space Grotesk", "Sora", system-ui, sans-serif`,r.fillText(t.symbol,t.x,t.y+.5)}),r.restore())}function re(){r.save(),r.scale(e.dpr,e.dpr),r.clearRect(0,0,e.width,e.height);const t=r.createLinearGradient(0,0,e.width,e.height);t.addColorStop(0,"rgba(96,165,250,0.08)"),t.addColorStop(.5,"rgba(251,191,36,0.05)"),t.addColorStop(1,"rgba(244,114,182,0.08)"),r.fillStyle=t,r.fillRect(0,0,e.width,e.height),r.fillStyle="rgba(255,255,255,0.04)",D(e.play.x,e.play.y,e.play.w,e.play.h,18),r.fill(),r.strokeStyle="rgba(255,255,255,0.12)",r.lineWidth=1.2,r.stroke(),e.bricks.forEach(a=>{if(!a.alive)return;const i=r.createLinearGradient(a.x,a.y,a.x,a.y+a.h);i.addColorStop(0,a.color),i.addColorStop(1,`${a.color}cc`),r.fillStyle=i,D(a.x,a.y,a.w,a.h,8),r.fill(),r.strokeStyle="rgba(255,255,255,0.18)",r.lineWidth=1,r.stroke()}),Ne();const s=r.createLinearGradient(e.paddle.x,e.paddle.y,e.paddle.x+e.paddle.w,e.paddle.y);s.addColorStop(0,p.colors.secondary),s.addColorStop(1,p.colors.primary),r.fillStyle=s,D(e.paddle.x,e.paddle.y,e.paddle.w,e.paddle.h,10),r.fill(),e.balls.forEach(a=>{const i=r.createRadialGradient(a.x-a.r*.4,a.y-a.r*.4,a.r*.2,a.x,a.y,a.r);i.addColorStop(0,"#ffffff"),i.addColorStop(1,p.colors.accent),r.fillStyle=i,r.beginPath(),r.arc(a.x,a.y,a.r,0,Math.PI*2),r.fill()}),r.restore(),ze()}function ze(){M.innerHTML="",M.appendChild(g);const t=e.totalBricks-e.bricksRemaining,s=v[R]||v.medium,a=e.balls.some(n=>n.stuck),i=document.createElement("div");i.className="hud",i.innerHTML=`
    <div class="chip">Score <strong>${e.score}</strong></div>
    <div class="chip">Briques <strong>${t}/${e.totalBricks}</strong></div>
    <div class="chip ghost">Vies <span>${e.lives}</span></div>
    <div class="chip ghost">Record <span>${e.best}</span></div>
    <div class="chip ghost">Niveau <span>${s.label}</span></div>
  `,M.appendChild(i);const o=document.createElement("div");o.className="hud bottom",o.innerHTML=`
    <div class="pill ${a?"glow":""}">${a?"Pret a lancer":`Balles ${e.balls.length}`}</div>
    <div class="pill ghost">${a?"Espace pour lancer":"Attrape les bonus/malus"}</div>
  `,M.appendChild(o)}function H(t,s,a=!0,i){var y;A.hide();const o=v[R]||v.medium;g.style.display="grid",M.style.pointerEvents="auto",x.style.pointerEvents="none";const n=((l==null?void 0:l.uiText.controls)||[]).map(f=>`<span class="chip ghost">${f}</span>`).join(""),u=Math.round(o.rows*o.cols*o.brickDensity),h="Bonus/Malus tombent : balles +, vitesse acceleree, touches inversees, ecran qui tremble, raquette reduite, raquette lente, balle minuscule.";g.innerHTML=`
    <div class="panel">
      <p class="pill">${(l==null?void 0:l.uiText.title)||"Casse-briques"} · ${o.label}</p>
      <h2>${t}</h2>
      ${i!==void 0?`<p class="muted">Score ${i}</p>`:""}
      <p class="muted">${s}</p>
      <p class="muted">${h}</p>
      <div class="panel-actions" style="justify-content:flex-start;">
        ${Object.entries(v).map(([f,d])=>`
              <button class="btn ghost diff-btn ${f===R?"active":""}" data-diff="${f}">
                ${d.label} · ${d.rows}x${d.cols} · ${d.lives} vie${d.lives>1?"s":""}
              </button>
            `).join("")}
      </div>
      <div class="panel-actions">
        ${a?'<button class="btn" id="start-btn">Lancer</button>':""}
        <a class="btn ghost" href="${pe("/")}">Hub</a>
      </div>
      <div class="inline-metrics">
        <div><span>Record</span><strong>${e.best}</strong></div>
        <div><span>Briques</span><strong>~${u}</strong></div>
        <div><span>Vies</span><strong>${o.lives}</strong></div>
      </div>
      <div class="controls">${n}</div>
    </div>
  `,(y=document.getElementById("start-btn"))==null||y.addEventListener("click",De),document.querySelectorAll(".diff-btn").forEach(f=>{f.addEventListener("click",()=>{const d=f.dataset.diff;d&&v[d]&&(R=d,H(t,s,a,i))})})}Z();window.addEventListener("resize",Z);se(w);te();e.paddle.x=e.play.x+(e.play.w-e.paddle.w)/2;N();H((l==null?void 0:l.uiText.title)||"Casse-briques",(l==null?void 0:l.uiText.help)||"");re();
